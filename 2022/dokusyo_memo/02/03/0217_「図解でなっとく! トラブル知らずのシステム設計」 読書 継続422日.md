# 0217\_「図解でなっとく! トラブル知らずのシステム設計」 読書 継続 422 日

## 第 2 部 DB 性能

### 第 5 章 非正規化・バインド

非正規化によって、検索性能はあがる。しかし、整合性は下がる。
検索性能とデータ更新時の整合性確保はトレードオフの関係にあるので、バランスを考えて非正規化を検討すること

バインドピーク
バインド変数を使うことで適切な実行計画にならないこと
バインドピーク問題を避けるためには、指定された検索条件に合わせて動的に SQL を組み立てる必要がある

「動的 SQL」を使うタイミング

- 結合するテーブルや結合順序が変わらないような場合。バインドピーク対策として有効
- 動的 SQL にすることでソフト解析が用いられず、SQL 解析コストがかかってしまうことがある。また、複雑性が増して挙動が読めなくなってしまう

通常のテーブルに状態を持たせてはいけない
「履歴テーブル方式」にして、履歴を持つテーブルを作成する
