# 1014\_「レガシーコードからの脱却 ―ソフトウェアの寿命を延ばし価値を高める 9 つのプラクティス」 読書 継続 295 日

### プラクティス 6 まずテストを書く

受け入れテスト=顧客テスト

ユニットテスト=開発者によるテスト

それ以外のテスト=QA テスト

良いテストを書く

「ユニット」が表現するのはふるまいだ、ふるまいが変わらないなら、テストを変える必要はない

テスト駆動開発はすばやいフィードバックをもたらす

テスト駆動開発はリファクタリングをサポートする

テスト駆動開発はリファクタリングをサポートする

テスト可能なコードを書く

優れた受け入れテストのための７つの戦略

- 作っているものが何に役立つのか明確にする
- 誰が何のために何をしたいのかを知る
- 受け入れ基準を自動化する
- エッジケース、例外、代替パスを洗わ明日
- 例示を使って評価を具体化し、矛盾を一掃する
- 受け入れ基準とふるまいの分離
- 各テストを一意にする

優れたユニットテストのための７つの戦略

- 呼び出し側の視点に立つ
- テストを使ってふるまいを表す
- 新しい違いを生み出すテストだけを書く
- 失敗したテストにパスするためのコードのみを書く
- テストを使って、ふるまいを作る
- コードをリファクタリングする
- テストをリファクタリング

ふりかえり

- テストフォースト開発の方法と、それをする理由
- あまりにも多くのテストを描いたり、実装依存のテストを描いたりすると、テストファースト開発は簡単に失敗する
- テストはコードのリファクタリングをサポートする必要があり、ふるまいを表すのに必要なテストだけを記述する
- テストファースト開発は QA に役立つが、QA に代わるものではない
- テストファースト開発は失敗するテストを作成し、合格するのに十分なコードを書くことで機能を作る、そのあと、必要に応じてリファクタリングし、失敗する別のテストを書くことを繰り返す

### プラクティス７ テストでふるまいを明示する

テストは仕様だ

完全であれ

テストを一意にする

コードをテストでカバーする

テストを仕様として使うための７つの戦略

1. テストを文書のように扱えるようにする
2. 意図がはっきりわかる名前のついたヘルパーメソッドを使う
3. 何が重要なのかを明らかにする
4. 実装ではなくふるまいをテストする
5. モックを使ってワークフローをテストする
6. 書きすぎない
7. 正確な例を使う

バグを修正する７つの戦略

1. そもそもバグを作らない
2. できるだけ早くバグを見つける
3. バグを見つけられるように設計する
4. 正しい質問をする
5. バグをテストの不足とみなす
6. 欠陥をもとにプロセスを修正する
7. 失敗から学ぶ
